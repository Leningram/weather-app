{"version":3,"sources":["components/search-weather/searchWeather.js","components/show-weather/show-weather.js","components/fav-cities-list/fav-cities-list.js","App.js","index.js"],"names":["SearchWeather","props","state","text","onValueChange","bind","onSubmit","e","this","setState","target","value","preventDefault","onSearch","className","placeholder","type","onChange","onClick","Component","ShowWeather","weather","addFav","date","main","name","sys","country","Math","round","temp","FavList","favourites","map","item","index","size","removeFav","App","city","JSON","parse","localStorage","getItem","search","currentDate","setCurrentCity","api","fetch","then","res","json","result","cities","indexOf","push","setItem","stringify","newArr","slice","data","day","getDay","getDate","month","getMonth","year","getFullYear","Date","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ab983a8a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nexport default class SearchWeather extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            text: \"\"\r\n        };\r\n        this.onValueChange = this.onValueChange.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n\r\n    onValueChange(e) {\r\n        this.setState({\r\n            text: e.target.value\r\n        });\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n        this.props.onSearch(this.state.text);\r\n        this.setState({\r\n            text: \"\"\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"weather--form\">\r\n                <input\r\n                    placeholder=\"Введите город... \"\r\n                    type=\"text\"\r\n                    onChange={this.onValueChange}\r\n                    value={this.state.text}\r\n                />\r\n                <button className=\"show--result__btn\" onClick={this.onSubmit}>\r\n                    Показать\r\n                </button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Component } from \"react\";\r\n\r\nexport default class ShowWeather extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    render() {\r\n        const { weather, addFav, date } = this.props;\r\n        return weather.main ? (\r\n            <div className=\"weather--result\">\r\n                <div className=\"weather--result__city\">\r\n                    {weather.name}, {weather.sys.country}\r\n                </div>\r\n                <div className=\"weather--result__data\">{date}</div>\r\n                <button onClick={() => addFav(weather.name)}>Добавить в изранное</button>\r\n                <div className=\"weather--result__temperature\">{Math.round(weather.main.temp)}°C</div>\r\n            </div>\r\n        ) : (\r\n            \"\"\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Component } from \"react\";\r\n\r\nexport default class FavList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n    }\r\n\r\n    render() {\r\n        const favourites = this.props.favourites.map((item, index) => {\r\n            return (\r\n                <li key={index}>\r\n                    <span onClick={() => this.props.onSearch(item)}>{item}</span>\r\n                    <button size=\"large\" onClick={() => this.props.removeFav(index)}>\r\n                        Удалить\r\n                    </button>\r\n                </li>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"weather--favourites\">\r\n                <ul>{favourites}</ul>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport SearchWeather from \"./components/search-weather/searchWeather\";\r\nimport ShowWeather from \"./components/show-weather/show-weather\";\r\nimport FavList from \"./components/fav-cities-list/fav-cities-list\";\r\n\r\nexport default class App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            city: \"\",\r\n            country: \"\",\r\n            weather: \"\",\r\n            favourites: JSON.parse(localStorage.getItem(\"cities\")) || [] //получаем список избранных городов. Если его нет, присваиваем пустой массив\r\n        };\r\n        this.search = this.search.bind(this);\r\n        this.addFav = this.addFav.bind(this);\r\n        this.currentDate = this.currentDate.bind(this);\r\n        this.removeFav = this.removeFav.bind(this);\r\n        this.setCurrentCity = this.removeFav.bind(this);\r\n    }\r\n\r\n    search(city) {\r\n        const api = {\r\n            key: \"a8c07f8a8d80fb52a4794b2fe34b7671\",\r\n            base: \"https://api.openweathermap.org/data/2.5/\"\r\n        };\r\n\r\n        fetch(`${api.base}weather?q=${city}&units=metric&APPID=${api.key}`)\r\n            .then((res) => res.json())\r\n            .then((result) => {\r\n                this.setState({ weather: result });\r\n                this.setState({ city: \"\" });\r\n            });\r\n    }\r\n\r\n    setCurrentCity() {}\r\n\r\n    componentDidMount() {\r\n        fetch(\"https://www.travelpayouts.com/whereami?locale=ru\")\r\n            .then((res) => res.json())\r\n            .then((result) => {\r\n                this.setState({ city: result.name });\r\n                this.search(this.state.city);\r\n            });\r\n    }\r\n\r\n    addFav(city) {\r\n        if (localStorage.getItem(\"cities\")) {\r\n            let cities = JSON.parse(localStorage.getItem(\"cities\"));\r\n            // Проверяем, есть ли такой город в избранном\r\n            if (cities.indexOf(city) < 0) {\r\n                cities.push(city); //если нет, добавляем\r\n                localStorage.setItem(\"cities\", JSON.stringify(cities));\r\n                this.setState({ favourites: cities });\r\n            }\r\n        } else {\r\n            let cities = [city];\r\n            localStorage.setItem(\"cities\", JSON.stringify(cities));\r\n            this.setState({ favourites: cities });\r\n        }\r\n    }\r\n\r\n    removeFav(index) {\r\n        this.setState(({ favourites }) => {\r\n            const newArr = [...favourites.slice(0, index), ...favourites.slice(index + 1)]; //создаем новый массив без элемента с нужным индексом\r\n            localStorage.setItem(\"cities\", JSON.stringify(newArr)); //перезаписываем новый массив в localStorage\r\n\r\n            return {\r\n                favourites: newArr\r\n            };\r\n        });\r\n    }\r\n\r\n    //Конвертация текущей даты\r\n    currentDate(data) {\r\n        const months = [\r\n            \"Январь\",\r\n            \"Февраль\",\r\n            \"Март\",\r\n            \"Апрель\",\r\n            \"Май\",\r\n            \"Июнь\",\r\n            \"Июль\",\r\n            \"Август\",\r\n            \"Сентябрь\",\r\n            \"Октябрь\",\r\n            \"Ноябрь\",\r\n            \"Декабрь\"\r\n        ];\r\n        const days = [\"Воскресенье\", \"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\"];\r\n\r\n        const day = days[data.getDay()];\r\n        const date = data.getDate();\r\n        const month = months[data.getMonth()];\r\n        const year = data.getFullYear();\r\n\r\n        return `${day} ${date} ${month} ${year}`;\r\n    }\r\n\r\n    render() {\r\n        const { city, weather, country, favourites } = this.state;\r\n        return (\r\n            <div className=\"app\">\r\n                <main className=\"weather--container\">\r\n                    <SearchWeather onSearch={this.search} />\r\n                    <ShowWeather\r\n                        addFav={this.addFav}\r\n                        weather={weather}\r\n                        city={city}\r\n                        country={country}\r\n                        date={this.currentDate(new Date())}\r\n                    />\r\n                    <FavList favourites={favourites} removeFav={this.removeFav} onSearch={this.search} />\r\n                </main>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}