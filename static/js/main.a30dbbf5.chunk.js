(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(9),i=a.n(c),s=(a(14),a(8)),o=a(3),u=a(4),h=a(2),l=a(6),v=a(5),b=a(0),j=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={text:""},n.onValueChange=n.onValueChange.bind(Object(h.a)(n)),n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"onValueChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSearch(this.state.text),this.setState({text:""})}},{key:"render",value:function(){return Object(b.jsxs)("form",{className:"weather--form",children:[Object(b.jsx)("input",{type:"text",onChange:this.onValueChange,value:this.state.text}),Object(b.jsx)("button",{className:"show--result__btn",onClick:this.onSubmit,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"})]})}}]),a}(n.Component),d=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.weather,a=e.addFav,n=e.date;return t.main?Object(b.jsxs)("div",{className:"weather--result",children:[Object(b.jsxs)("div",{className:"weather--result__city",children:[t.name,", ",t.sys.country]}),Object(b.jsx)("div",{className:"weather--result__data",children:n}),Object(b.jsx)("button",{onClick:function(){return a(t.name)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(b.jsxs)("div",{className:"weather--result__temperature",children:[Math.round(t.main.temp),"\xb0C"]})]}):""}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.favourites.map((function(t,a){return Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{onClick:function(){return e.props.onSearch(t)},children:t}),Object(b.jsx)("button",{size:"large",onClick:function(){return e.props.removeFav(a)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},a)}));return Object(b.jsx)("div",{className:"weather--favourites",children:Object(b.jsx)("ul",{children:t})})}}]),a}(n.Component),f=function(e){Object(l.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={city:"",country:"",weather:"",favourites:JSON.parse(localStorage.getItem("cities"))||[]},n.search=n.search.bind(Object(h.a)(n)),n.addFav=n.addFav.bind(Object(h.a)(n)),n.currentDate=n.currentDate.bind(Object(h.a)(n)),n.removeFav=n.removeFav.bind(Object(h.a)(n)),n.setCurrentCity=n.removeFav.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"search",value:function(e){var t=this,a="a8c07f8a8d80fb52a4794b2fe34b7671";fetch("".concat("https://api.openweathermap.org/data/2.5/","weather?q=").concat(e,"&units=metric&APPID=").concat(a)).then((function(e){return e.json()})).then((function(e){t.setState({weather:e}),t.setState({city:""})}))}},{key:"setCurrentCity",value:function(){}},{key:"componentDidMount",value:function(){this.search("Saint Petersburg")}},{key:"addFav",value:function(e){if(localStorage.getItem("cities")){var t=JSON.parse(localStorage.getItem("cities"));t.indexOf(e)<0&&(t.push(e),localStorage.setItem("cities",JSON.stringify(t)),this.setState({favourites:t}))}else{var a=[e];localStorage.setItem("cities",JSON.stringify(a)),this.setState({favourites:a})}}},{key:"removeFav",value:function(e){this.setState((function(t){var a=t.favourites,n=[].concat(Object(s.a)(a.slice(0,e)),Object(s.a)(a.slice(e+1)));return localStorage.setItem("cities",JSON.stringify(n)),{favourites:n}}))}},{key:"currentDate",value:function(e){var t=["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][e.getDay()],a=e.getDate(),n=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(a," ").concat(n," ").concat(r)}},{key:"render",value:function(){var e=this.state,t=e.city,a=e.weather,n=e.country,r=e.favourites;return Object(b.jsx)("div",{className:"app",children:Object(b.jsxs)("main",{className:"weather--container",children:[Object(b.jsx)(j,{onSearch:this.search}),Object(b.jsx)(d,{addFav:this.addFav,weather:a,city:t,country:n,date:this.currentDate(new Date)}),Object(b.jsx)(O,{favourites:r,removeFav:this.removeFav,onSearch:this.search})]})})}}]),a}(n.Component);i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(f,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.a30dbbf5.chunk.js.map